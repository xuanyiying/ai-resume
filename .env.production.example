# Production Environment Configuration
# WARNING: This file contains sensitive information. Never commit to version control!
# Copy this file to .env.production.local and fill in actual values

# ============================================
# Server Configuration
# ============================================
NODE_ENV=production
PORT=3000
API_PREFIX=/api/v1

# ============================================
# Database Configuration (Requirement 9.1)
# ============================================
# PostgreSQL Production Settings
POSTGRES_DB=resume_optimizer_prod
POSTGRES_USER=resume_prod_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
DATABASE_URL=postgresql://resume_prod_user:CHANGE_ME_STRONG_PASSWORD_HERE@postgres:5432/resume_optimizer_prod?schema=public&sslmode=disable&connect_timeout=10&pool_timeout=10

# Database Connection Pool
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=10000

# ============================================
# Redis Configuration (Requirement 9.1)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_HERE
REDIS_TLS_ENABLED=false
REDIS_DB=0

# ============================================
# JWT Configuration (Requirement 9.1, 9.2)
# ============================================
JWT_SECRET=CHANGE_ME_LONG_RANDOM_SECRET_AT_LEAST_32_CHARS
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_ME_ANOTHER_LONG_RANDOM_SECRET
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# OpenAI Configuration
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30000

# OSS Provider Type
OSS_TYPE=MINIO

# Common OSS Configuration
OSS_BUCKET=resume-optimizer-files
OSS_REGION=us-east-1

# MinIO Configuration (for local development)
OSS_ENDPOINT=http://localhost:9000
OSS_PUBLIC_ENDPOINT=http://localhost:9000
OSS_ACCESS_KEY=ossadmin
OSS_SECRET_KEY=osspassword
OSS_PATH_STYLE=true
# ============================================
# Rate Limiting (Requirement 11.1, 11.2)
# ============================================
RATE_LIMIT_FREE_TIER=10
RATE_LIMIT_PRO_TIER=1000
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_ENABLED=true

# ============================================
# File Upload Configuration (Requirement 2.1, 2.2)
# ============================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=pdf,docx,txt
FILE_UPLOAD_TIMEOUT=60000

# ============================================
# Security Configuration (Requirement 9.1, 9.4)
# ============================================
# CORS
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true

# HTTPS/TLS (Requirement 9.1)
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# Content Security Policy
CSP_ENABLED=true

# ============================================
# Logging Configuration (Requirement 12.5)
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760

# ============================================
# Monitoring & Alerting (Requirement 10.5, 12.6)
# ============================================
# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_ENABLED=true

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_DB_TIMEOUT=5000
HEALTH_REDIS_TIMEOUT=5000

# Performance Thresholds (Requirement 10.1, 10.3)
SLOW_REQUEST_MS=2000
HIGH_ERROR_RATE_PERCENT=5
HIGH_MEMORY_USAGE_PERCENT=90
HIGH_CPU_USAGE_PERCENT=80

# Alerting
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com,ops@yourdomain.com
ALERT_EMAIL_FROM=alerts@yourdomain.com

# ============================================
# Backup Configuration (Requirement 9.5)
# ============================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_S3_BUCKET=resume-optimizer-backups
BACKUP_ENCRYPTION_KEY=CHANGE_ME_BACKUP_ENCRYPTION_KEY

# Cloud Storage (Optional - to suppress warnings)
STORAGE_PROVIDER=MINIO

OSS_TYPE=MINIO
OSS_ACCESS_KEY=ossadmin
OSS_SECRET_KEY=osspassword
OSS_ENDPOINT=http://localhost:9000
OSS_BUCKET=resume-optimizer-files
OSS_REGION=us-east-1
OSS_SECURE=false

# ============================================
# Performance Configuration (Requirement 10.5)
# ============================================
# Caching
CACHE_TTL_DEFAULT=3600
CACHE_TTL_RESUME_PARSE=86400
CACHE_TTL_AI_RESPONSE=3600

# Timeouts (Requirement 10.1, 10.2, 10.3, 10.4)
API_TIMEOUT=2000
RESUME_PARSE_TIMEOUT=5000
AI_OPTIMIZATION_TIMEOUT=30000
PDF_GENERATION_TIMEOUT=10000

# Concurrency
MAX_CONCURRENT_REQUESTS=100
MAX_CONCURRENT_AI_CALLS=10

# ============================================
# Domain & SSL Configuration (Requirement 9.1)
# ============================================
DOMAIN=yourdomain.com
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_CHAIN_PATH=/etc/nginx/ssl/chain.pem

# Let's Encrypt
LETSENCRYPT_EMAIL=admin@yourdomain.com
LETSENCRYPT_STAGING=false

# ============================================
# Frontend Configuration
# ============================================
VITE_API_BASE_URL=https://yourdomain.com/api/v1
VITE_API_TIMEOUT=30000
VITE_APP_NAME="Resume Optimizer"
VITE_APP_VERSION=1.0.0
VITE_SENTRY_DSN=https://your-frontend-sentry-dsn@sentry.io/project-id

# ============================================
# Feature Flags
# ============================================
FEATURE_AI_OPTIMIZATION=true
FEATURE_PDF_GENERATION=true
FEATURE_INTERVIEW_PREP=true
FEATURE_PREMIUM_TEMPLATES=true

# ============================================
# Maintenance Mode
# ============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="We are currently performing scheduled maintenance. Please check back soon."
